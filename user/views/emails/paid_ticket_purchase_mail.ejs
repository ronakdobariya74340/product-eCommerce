<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet" />
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                background-color: #fff;
                font-family: "Manrope", sans-serif;
                font-optical-sizing: auto;
                color: #201611;
            }

            .w-100 {
                width: 100%;
            }

            .email-container {
                width: 100%;
                max-width: 620px;
                margin: 0 auto;
                font-size: 14px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }

            .logo {
                max-width: 40px;
            }

            .highlight {
                color: #d3ae59;
                font-weight: 600;
                margin: 8px 0;
            }

            .message-topic {
                padding: 20px;
                border-bottom: 1px solid #d4d2d2;
            }

            .message-topic p {
                margin-bottom: 8px;
            }

            .body-text {
                color: #5e5858;
            }

            .body-text span {
                color: #201611;
            }

            .body-text a {
                color: #201611;
                outline: none;
            }

            .message-details {
                padding: 20px;
                border-bottom: 1px solid #d4d2d2;
            }

            .help-text {
                padding: 20px;
            }

            ol {
                margin-left: 18px;
                margin-top: 4px;
            }

            .d-item {
                color: #706868;
            }

            a {
                color: #007aff;
            }

            .value {
                color: #202020;
                text-align: right;
                padding-bottom: 5px;
            }

            .title {
                font-size: 16px;
                margin-bottom: 12px;
            }

            .code {
                font-size: 18px;
            }

            .footer {
                padding: 16px;
                background-color: #d3ae59;
                text-align: center;
                font-size: 12px;
            }

            button {
                padding: 12px 24px;
                background-color: #d3ae59;
                border: 0;
                border-radius: 8px;
                color: #432b00;
                cursor: pointer;
            }

            @media (max-width: 479px) {
                .email-container {
                font-size: 14px;
                }
            }
        </style>

        <% if (Number(id)===1) { %>
            <!-- Ticket Pack Purchased - Single Celebrity -->
            <table class="email-container" cellpadding="0" cellspacing="0">
                <thead style="background-color: #432b00">
                    <tr>
                        <th style="text-align: center; padding: 10px 16px 6px 16px">
                            <img src="assets/images/logo.svg" alt="" class="logo" />
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="message-topic">
                            <p>Dear <strong> <%= userName %> </strong></p>
                            <p class="body-text">Thanks for participating in the <strong> <%= celebrity[0].name %></strong> Raffle on <strong>MDF!</strong></p>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details">
                            <h3 class="title">‚úÖ Your entry is confirmed!</h3>
                            <p style="margin-bottom: 12px">You‚Äôve successfully purchased the <strong><%= membership.map(m => m.name).join(",") %> </strong>, which includes:</p>
                            <table style="width: 100%">
                                <tbody>
                                    <tr>
                                        <td class="d-item w-100">Total Entries Earned:</td>
                                        <td class="value"><%= ticket[0].totalEntries %> Entries </td>
                                    </tr>
                                    <tr>
                                        <td class="d-item">Celebrity Raffle:</td>
                                        <td class="value"><%= celebrity[0].name %></td>
                                    </tr>
                                    <tr>
                                        <td class="d-item">Raffle Draw Date:</td>
                                        <td class="value"><%= new Date(ticket[0]?.created_at).toLocaleDateString('en-US', { year: 'numeric' , month: 'short' , day: '2-digit' }) %> </td>
                                    </tr>
                                    <tr>
                                        <td class="d-item">Entry Type:</td>
                                        <td class="value"><%= ticket[0].type===1 ? "Free" : ticket[0].type===2 ? "Paid" : ticket[0].type===3 ? "Gift" : "-" %> </td>
                                    </tr>
                                    <tr>
                                        <td class="d-item">Transaction ID:</td>
                                        <td class="value"><%= ticket[0]._id?.toString() %> </td>
                                    </tr>
                                    <tr>
                                        <td class="d-item">Raffle Link</td>
                                        <td class="value">
                                            <a href="<%= process.env.SERVER_URL %>/product-details/<%= celebrity[0]._id?.toString() %>"><%= process.env.SERVER_URL %>/product-details/<%= celebrity[0]._id?.toString() %>"</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details" style="text-align: center">
                            <a href="<%= process.env.SERVER_URL %>/setting?tab=v-pills-settings-tab"><button>My Entries</button></a>
                            <p class="highlight">Best of luck! We hope you get the chance to meet <span> <%= celebrity[0].name %> </span> soon! üé¨‚ú®</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="help-text">
                            <h3 class="title">Need Help?</h3>
                            <p class="body-text">If you have any questions or need help, please:</p>
                            <ol>
                                <li>Contact us immediately at <a href="<%= 'mailto:'+ process.env.SUPPORT_MAIL %>"> <%= process.env.SUPPORT_MAIL %></a> or</li>
                                <li>Create a ticket at <a href="<%= process.env.SERVER_URL %>/contact">milliondollarfan.show/contact</a></li>
                            </ol>
                        </td>
                    </tr>
                    <tr>
                        <td class="help-text" style="text-align: center">
                            <h4>Your security is our top priority.</h4>
                            <h4 class="highlight">Thank you for choosing MillionDollarFan.</h4>
                            <p>MDF Team</p>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td class="footer">¬© 2025 MillionDollarFan. All rights reserved.</td>
                    </tr>
                </tfoot>
            </table>
        <% } else if (Number(id)===2) { %>
            <!-- Ticket Pack Purchased - Single Celebrity + Gift Card -->
            <table class="email-container" cellpadding="0" cellspacing="0">
                <thead style="background-color: #432b00">
                    <tr>
                        <th style="text-align: center; padding: 10px 16px 6px 16px">
                            <img src="assets/images/logo.svg" alt="" class="logo" />
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="message-topic">
                            <p>Dear <strong> <%= userName %> </strong></p>
                            <p class="body-text">Thanks for your purchase! You‚Äôve successfully secured entries for yourself and sent a gift pack for the <strong> <%= celebrity[0].name %> </strong> raffle.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details">
                            <h3 class="title">üéüÔ∏è Your Entries:</h3>
                            <p style="margin-bottom: 8px">These packs have been successfully added to your account:</p>
                            <table style="width: 100%">
                                <tbody>
                                    <tr>
                                        <td><strong>Celebrity</strong></td>
                                        <td><strong>Plan Purchased</strong></td>
                                        <td><strong>Entries</strong></td>
                                        <td><strong>Raffle Draw Date</strong></td>
                                    </tr>
                                    <tr>
                                        <td> <%= celebrity[0].name %> </td>
                                        <td> <%= membership[0].membershipType %></td>
                                        <td> <%= ticket[0].totalEntries %> </td>
                                        <td> <%= new Date(ticket[0]?.created_at).toLocaleDateString('en-US', { year: 'numeric' , month: 'short' , day: '2-digit' }) %> </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details" style="text-align: center">
                            <a href="<%= process.env.SERVER_URL %>/setting?tab=v-pills-settings-tab">
                                <button>My Entries</button>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details">
                            <h3 class="title">üéÅ Gifts Sent:</h3>
                            <p style="margin-bottom: 8px">The following packs have been sent as gifts:</p>
                            <table style="width: 100%">
                                <tbody>
                                    <tr>
                                        <td><strong>Celebrity</strong></td>
                                        <td><strong>Plan Purchased</strong></td>
                                        <td><strong>Entries</strong></td>
                                        <td><strong>Raffle Draw Date</strong></td>
                                    </tr>
                                    <% if (giftcard && giftcard.length> 0) { giftcard.forEach((gift, index)=> { %>
                                        <tr> 
                                            <td> <%= celebrity[0]?.name || "-" %> </td>
                                            <td> <%= membership.find(m => m._id?.toString() === gift.membershipId?.toString())?.name || "N/A" %> </td>
                                            <td> <%= gift.totalEntries %> </td>
                                            <td> <%= new Date(gift.created_at).toLocaleDateString('en-US', { year: 'numeric' , month: 'short' , day: '2-digit' }) %> </td>
                                        </tr>
                                    <% }); } %>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details" style="text-align: center">
                            <a href="<%= process.env.SERVER_URL %>/setting?tab=mf-gift-tab ">
                                <button>Manage Gifts</button>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details">
                            <h3 class="title">Transaction Details:</h3>
                            <table style="width: 100%">
                                <tbody>
                                    <tr>
                                        <td class="d-item">Status:</td>
                                        <td class="value"> <%= ticket[0].status===1 ? "Pending" : ticket[0].status===2 ? "Completed" : ticket[0].status===3 ? "Failed" : " -" %> </td>
                                    </tr>
                                    <tr>
                                        <td class="d-item">Transaction ID:</td>
                                        <td class="value"> <%= ticket[0].paymentMethod===2 ? "Paypal" : "Stripe" %> / <%= ticket[0]._id?.toString() %></td>
                                    </tr>
                                    <tr>
                                        <td class="d-item">Date/Time:</td>
                                        <td class="value"><%= new Date(ticket[0].created_at).toLocaleString("en-IN", { timeZone: "Asia/Kolkata", year: "numeric", month: "long", day: "numeric", hour: "numeric", minute: "2-digit", hour12: true }) + " IST" %></td>
                                    </tr>
                                </tbody>
                            </table>
                            <p style="margin-top: 12px">We hope both of you enjoy the experience ‚Äî and maybe even win together!</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="help-text">
                            <h3 class="title">Need Help?</h3>
                            <p class="body-text">If you have any questions or need help, please:</p>
                            <ol>
                                <li>Contact us immediately at <a href="<%= 'mailto:'+ process.env.SUPPORT_MAIL %>"> <%= process.env.SUPPORT_MAIL %> </a> or</li>
                                <li>Create a ticket at <a href="<%= process.env.SERVER_URL %>/contact">milliondollarfan.show/contact</a></li>
                            </ol>
                        </td>
                    </tr>
                    <tr>
                        <td class="help-text" style="text-align: center">
                            <h4>Your security is our top priority.</h4>
                            <h4 class="highlight">Thank you for choosing MillionDollarFan.</h4>
                            <p>MDF Team</p>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td class="footer">¬© 2025 MillionDollarFan. All rights reserved.</td>
                    </tr>
                </tfoot>
            </table>
        <% } else if (Number(id)===3) { %>
            <!-- Ticket Pack Purchased - Multiple Celebrities (No Gift) -->
            <table class="email-container" cellpadding="0" cellspacing="0">
                <thead style="background-color: #432b00">
                    <tr>
                        <th style="text-align: center; padding: 10px 16px 6px 16px">
                            <img src="assets/images/logo.svg" alt="" class="logo" />
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="message-topic">
                            <p>Dear <strong><%= userName %></strong></p>
                            <p class="body-text">Thank you for purchasing raffle packs for your favorite celebrities. Here‚Äôs a summary of your entries:</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details">
                            <h3 class="title">üéüÔ∏è Raffle Entries Summary:</h3>
                            <table style="width: 100%">
                                <tbody>
                                    <tr>
                                        <td><strong>Celebrity</strong></td>
                                        <td><strong>Plan Purchased</strong></td>
                                        <td><strong>Entries</strong></td>
                                        <td><strong>Raffle Draw Date</strong></td>
                                    </tr>
                                    <% ticket.forEach((ticketObj) => { %>
                                        <% const celeb = celebrity.find(c => c?._id?.toString() === ticketObj.celebrityId._id.toString()); %>
                                        <% ticketObj.membershipDetails.forEach((member) => { %>
                                            <tr>
                                                <td><%= celeb?.name || "N/A" %></td>
                                                <td><%= member.membershipType || "N/A" %></td>
                                                <td><%= member.totalEntries || 0 %></td>
                                                <td>
                                                    <%= new Date(ticketObj.created_at).toLocaleString("en-IN", { timeZone: "Asia/Kolkata", year: "numeric", month: "short", day: "2-digit" }) %>
                                                </td>
                                            </tr>
                                        <% }); %>
                                    <% }); %>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details" style="text-align: center">
                            <a href="<%= process.env.SERVER_URL %>/setting?tab=v-pills-settings-tab">
                                <button>My Entries</button>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details">
                            <h3 class="title">Transaction Details:</h3>
                            <table style="width: 100%">
                                <tbody>
                                    <tr>
                                        <td class="d-item">Status:</td>
                                        <td class="value">
                                            <%= ticket[0].status===1 ? "Pending" : ticket[0].status===2 ? "Completed" : ticket[0].status===3 ? "Failed" : " -" %>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="d-item">Transaction ID:</td>
                                        <td class="value">
                                            <%= ticket[0].paymentMethod===2 ? "Paypal" : "Stripe" %> / <%= ticket[0]._id?.toString() %>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="d-item">Date/Time:</td>
                                        <td class="value">
                                            <%= new Date(ticket[0].created_at).toLocaleString("en-IN", { timeZone: "Asia/Kolkata", year: "numeric", month: "long", day: "numeric", hour: "numeric", minute: "2-digit", hour12: true }) + " IST" %>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <p style="margin-top: 12px">Thanks for being part of the excitement ‚Äî we hope you get the chance to meet your favorite stars! üåü</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="help-text">
                            <h3 class="title">Need Help?</h3>
                            <p class="body-text">If you have any questions or need help, please:</p>
                            <ol>
                                <li>
                                    Contact us immediately at <a href="<%= 'mailto:'+ process.env.SUPPORT_MAIL %>"><%= process.env.SUPPORT_MAIL %></a>or
                                </li>
                                <li>
                                    Create a ticket at <a href="<%= process.env.SERVER_URL %>/contact">milliondollarfan.show/contact</a>
                                </li>
                            </ol>
                        </td>
                    </tr>
                    <tr>
                        <td class="help-text" style="text-align: center">
                            <h4 class="highlight">Thank you for choosing MillionDollarFan.</h4>
                            <p>MDF Team</p>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td class="footer">¬© 2025 MillionDollarFan. All rights reserved.</td>
                    </tr>
                </tfoot>
            </table>
        <% } else if (Number(id)===4) { %>
            <!-- Ticket Pack Purchased - Multiple Celebrities (With Gift) -->
            <table class="email-container" cellpadding="0" cellspacing="0">
                <thead style="background-color: #432b00">
                    <tr>
                        <th style="text-align: center; padding: 10px 16px 6px 16px">
                            <img src="assets/images/logo.svg" alt="" class="logo" />
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="message-topic">
                            <p>Dear <strong> <%= userName %> </strong></p>
                            <p class="body-text">Thanks for your purchase on <span><strong>MDF!</strong></span></p>
                            <p class="body-text">Below is a summary of your raffle entries and gifted packs across your selected celebrities.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details">
                            <h3 class="title">üéüÔ∏è Your Entries:</h3>
                            <p style="margin-bottom: 8px">These packs have been successfully added to your account:</p>
                            <table style="width: 100%">
                                <tbody>
                                    <tr>
                                        <td><strong>Celebrity</strong></td>
                                        <td><strong>Plan Purchased</strong></td>
                                        <td><strong>Entries</strong></td>
                                        <td><strong>Raffle Draw Date</strong></td>
                                    </tr>
                                    <% ticket.forEach((ticketObj) => { %>
                                        <% const celeb = celebrity.find(c => c?._id?.toString() === ticketObj.celebrityId._id.toString()); %>
                                        <% ticketObj.membershipDetails.forEach((member) => { %>
                                            <tr>
                                                <td><%= celeb?.name || "N/A" %></td>
                                                <td><%= member.membershipType || "N/A" %></td>
                                                <td><%= member.totalEntries || 0 %></td>
                                                <td>
                                                    <%= new Date(ticketObj.created_at).toLocaleString("en-IN", { timeZone: "Asia/Kolkata", year: "numeric", month: "short", day: "2-digit" }) %>
                                                </td>
                                            </tr>
                                        <% }); %>
                                    <% }); %>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details" style="text-align: center">
                            <a href="<%= process.env.SERVER_URL %>/setting?tab=v-pills-settings-tab">
                                <button>My Entries</button>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details">
                            <h3 class="title">üéÅ Gifts Sent:</h3>
                            <p style="margin-bottom: 8px">The following packs have been sent as gifts:</p>
                            <table style="width: 100%">
                                <tbody>
                                    <tr>
                                        <td><strong>Celebrity</strong></td>
                                        <td><strong>Pack</strong></td>
                                        <td><strong>Entries</strong></td>
                                        <td><strong>Raffle Draw Date</strong></td>
                                    </tr>
                                    <% if (giftcard && giftcard.length> 0) { giftcard.forEach((gift, index)=> { %>
                                        <tr>
                                            <td> <%= celebrity.find(c => c._id?.toString() === gift.celebrityId?.toString())?.name || "-" %> </td>
                                            <td> <%= membership.find(m => m._id?.toString() === gift.membershipId?.toString())?.name || "N/A" %> </td>
                                            <td> <%= gift.totalEntries %></td>
                                            <td> <%= new Date(gift.created_at).toLocaleDateString('en-US', { year: 'numeric' , month: 'short' , day: '2-digit' }) %> </td>
                                        </tr>
                                    <% }); } %>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details" style="text-align: center">
                            <a href="<%= process.env.SERVER_URL %>/setting?tab=mf-gift-tab ">
                                <button>Manage Gifts</button>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td class="message-details">
                            <h3 class="title">Transaction Details:</h3>
                            <table style="width: 100%">
                                <tbody>
                                    <tr>
                                        <td class="d-item">Status:</td>
                                        <td class="value"><%= ticket[0].status===1 ? "Pending" : ticket[0].status===2 ? "Completed" : ticket[0].status===3 ? "Failed" : " -" %></td>
                                    </tr>
                                    <tr>
                                        <td class="d-item">Transaction ID:</td>
                                        <td class="value"> <%= ticket[0].paymentMethod === 2 ? "Paypal" : "Stripe" %> / <%= ticket[0]._id?.toString()%></td>
                                    </tr>
                                    <tr>
                                        <td class="d-item">Date/Time:</td>
                                        <td class="value"><%= new Date(ticket[0].created_at).toLocaleString("en-IN", { timeZone: "Asia/Kolkata", year: "numeric", month: "long", day: "numeric", hour: "numeric", minute: "2-digit", hour12: true }) + " IST" %></td>
                                    </tr>
                                </tbody>
                            </table>
                            <p style="margin-top: 12px">Your recipients have been notified and can redeem their packs anytime before the raffle deadline.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="help-text">
                            <h3 class="title">Need Help?</h3>
                            <p class="body-text">If you have any questions or need help, please:</p>
                            <ol>
                                <li>
                                    Contact us immediately at <a href="<%= 'mailto:'+ process.env.SUPPORT_MAIL %>"> <%= process.env.SUPPORT_MAIL %> </a> or
                                </li>
                                <li>
                                    Create a ticket at <a href="<%= process.env.SERVER_URL %>/contact">milliondollarfan.show/contact</a>
                                </li>
                            </ol>
                            <br />
                            <p>Thanks for spreading the star-powered joy ‚Äî we‚Äôre cheering for you and your friends! üåü</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="help-text" style="text-align: center">
                            <h4 class="highlight">Thank you for choosing MillionDollarFan.</h4>
                            <p>MDF Team</p>
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td class="footer">¬© 2025 MillionDollarFan. All rights reserved.</td>
                    </tr>
                </tfoot>
            </table>
        <% } %>
    </head>

    <body></body>

</html>